# Enable xwayland
xwayland enable

#
# Variables
#
set $mod Mod1
set $windowskey Mod4
set $left h
set $down j
set $up k
set $right l
set $laptop "eDP-1"
set $font "Terminess Nerd Font 9"
set $lockcmd swaylock --font $font -f -c 000000
set $gnome-schema org.gnome.desktop.interface
set $normbg "#242b38"
set $normfg "#ABB2BF"
set $selbg "#4fa6ed"
set $selfg "#242b38"
set $normborder "#3E4452"
set $selborder "#425B80"
set $opaque "#00000000"
set $occupiedfg "#bf68d9"

#
# Output configuration
#
output * bg /home/vighd/Pictures/wp.png fill
bindswitch --reload --locked lid:on output $laptop disable; output 'Acer Technologies EK240Y TJEEE0053W01' pos 0 0 res 1920x1080@75Hz
bindswitch --reload --locked lid:off output $laptop enable pos 0 0 res 1920x1080; output 'Acer Technologies EK240Y TJEEE0053W01' pos 1920 0 res 1920x1080@75Hz

#
# Keyboard
#
input type:keyboard {
  xkb_layout "hu"
  xkb_options "grp:win_space_toggle"
  repeat_delay 250
  repeat_rate 45
}

#
# Mouse
#
mouse_warping none
focus_follows_mouse always
input 2:1:PS/2_Generic_Mouse {
  accel_profile adaptive
  pointer_accel 0.2
}

#
# Idle configuration
#
exec swayidle -w \
	timeout 600 'swaylock -f -c 000000' \
	timeout 900 'swaymsg "output * power off"' \
	resume 'swaymsg "output * power on"'


### Key bindings
#
# Basics:
#
bindsym $mod+p exec bemenu-run -p "RUN" -H 19 --hp 7 --ch 14 --fn $font --nb $normbg --fb $normbg --cb $normbg --ab $normbg --tb $normbg --nf $normfg --ff $normfg --cf $normfg --af $normfg --tf $normfg --hb $selbg --hf $normbg | xargs swaymsg exec --
bindsym $mod+Shift+b exec bemenu-bluetooth -p "BLUETOOTH" -H 19 --hp 7 --ch 14 --fn $font --nb $normbg --fb $normbg --cb $normbg --ab $normbg --tb $normbg --nf $normfg --ff $normfg --cf $normfg --af $normfg --tf $normfg --hb $selbg --hf $normbg | xargs swaymsg exec --
bindsym $mod+i exec pass-bemenu -p "PASSWORD" -H 19 --hp 7 --ch 14 --fn $font --nb $normbg --fb $normbg --cb $normbg --ab $normbg --tb $normbg --nf $normfg --ff $normfg --cf $normfg --af $normfg --tf $normfg --hb $selbg --hf $normbg | xargs swaymsg exec --
bindsym $mod+o exec pass-bemenu --otp -p "OTP" -H 19 --hp 7 --ch 14 --fn $font --nb $normbg --fb $normbg --cb $normbg --ab $normbg --tb $normbg --nf $normfg --ff $normfg --cf $normfg --af $normfg --tf $normfg --hb $selbg --hf $normbg | xargs swaymsg exec --
bindsym $mod+Shift+Return exec foot
bindsym $mod+Shift+n exec foot -e iwctl
bindsym $mod+Shift+f exec foot -e vifm
bindsym $mod+Shift+s exec foot -e pulsemixer
bindsym $mod+Shift+w exec chromium
bindsym $mod+Shift+q exec swaymsg exit
bindsym $mod+Shift+c kill
bindsym Ctrl+$mod+Shift+q reload
bindsym $mod+r mode "resize"
bindsym Print exec grim -g "$(slurp)"
bindsym $windowskey+g exec grep performance /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor > /dev/null && sudo tlp bat || sudo tlp ac
bindsym $windowskey+l exec $lockcmd
bindsym --locked XF86AudioMute exec wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindsym --locked XF86AudioLowerVolume exec wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%- -l 1.2
bindsym --locked XF86AudioRaiseVolume exec wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+ -l 1.2
bindsym --locked XF86AudioMicMute exec pactl set-source-mute @DEFAULT_SOURCE@ toggle
bindsym --locked XF86MonBrightnessDown exec brightnessctl set 5%-
bindsym --locked XF86MonBrightnessUp exec brightnessctl set 5%+
bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right
bindsym $mod+Shift+$left move left
bindsym $mod+Shift+$down move down
bindsym $mod+Shift+$up move up
bindsym $mod+Shift+$right move right
bindsym $mod+b splith
bindsym $mod+v splitv
bindsym $mod+s layout toggle split
bindsym $mod+f floating toggle
bindsym $mod+m layout stacking toggle

floating_modifier $mod normal

#
# Workspaces:
#
workspace 1 output DP-3 HDMI-A-2 eDP-1
workspace 2 output DP-3 HDMI-A-2 eDP-1
workspace 3 output DP-3 HDMI-A-2 eDP-1
workspace 4 output eDP-1
workspace 5 output eDP-1
workspace 6 output eDP-1
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6

#
# Layout stuff:
#
default_orientation horizontal
#exec autotiling-rs -w 1 2 3 4 5 6
for_window [title="Open File"] toggle floating
for_window [title="Save File"] toggle floating

#
# Resizing containers:
#
mode "resize" {
  bindsym $left resize shrink width 10px
  bindsym $down resize grow height 10px
  bindsym $up resize shrink height 10px
  bindsym $right resize grow width 10px

  # Return to default mode
  bindsym Return mode "default"
  bindsym Escape mode "default"
}

#
# Ui configuration
#
font $font
default_border pixel 1
smart_borders on
title_align center

# Disable titlebar in stacking and tabbed mode
font pango:monospace 0
titlebar_border_thickness 0
titlebar_padding 0

# Enable titlebar for floating windows
for_window [floating] font $font
for_window [floating] titlebar_border_thickness 1
for_window [floating] titlebar_padding 5

# GTK Theme
exec_always {
  gsettings set $gnome-schema gtk-theme "OneDarkCool"
  gsettings set $gnome-schema icon-theme "Numix"
  gsettings set $gnome-schema cursor-theme "X11-Default-Black"
  gsettings set $gnome-schema font-name "Source Code Pro 10"
}

# Client colors
client.focused          $opaque $selborder  $normfg $selbg
client.focused_inactive $normbg $normborder $normfg
client.unfocused        $normbg $normborder $normfg

#
# Bar configuration
#
bar {
#  pango_markup enabled
#  font $font
   position top
#  height 19
#
#  status_command waybar
   swaybar_command waybar
#
#  colors {
#    statusline $normfg
#    background $normbg
#                       # border  bg     fg
#    urgent_workspace   $opaque $normbg #e55561
#    focused_workspace  $opaque $selbg  $normbg
#    active_workspace   $opaque $normbg $normfg
#    inactive_workspace $opaque $opaque $occupiedfg
#  }
}


include /etc/sway/config.d/*
